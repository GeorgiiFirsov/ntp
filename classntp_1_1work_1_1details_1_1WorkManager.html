<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ntp: ntp::work::details::WorkManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ntp
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">Threadpool library based on Win32 Threadool API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classntp_1_1work_1_1details_1_1WorkManager.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classntp_1_1work_1_1details_1_1WorkManager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ntp::work::details::WorkManager Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classntp_1_1work_1_1details_1_1WorkManager.html" title="WorkManager for work callbacks. Binds callbacks and threadpool implementation.">WorkManager</a> for work callbacks. Binds callbacks and threadpool implementation.  
 <a href="classntp_1_1work_1_1details_1_1WorkManager.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="work_8hpp_source.html">work.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ntp::work::details::WorkManager:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classntp_1_1work_1_1details_1_1WorkManager__inherit__graph.svg" width="206" height="127"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ntp::work::details::WorkManager:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classntp_1_1work_1_1details_1_1WorkManager__coll__graph.svg" width="206" height="127"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3219349801a1feceb373f4c11bb73180"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classntp_1_1work_1_1details_1_1WorkManager.html#a3219349801a1feceb373f4c11bb73180">WorkManager</a> (PTP_CALLBACK_ENVIRON environment)</td></tr>
<tr class="memdesc:a3219349801a1feceb373f4c11bb73180"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor that initializes all necessary objects.  <a href="classntp_1_1work_1_1details_1_1WorkManager.html#a3219349801a1feceb373f4c11bb73180">More...</a><br /></td></tr>
<tr class="separator:a3219349801a1feceb373f4c11bb73180"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a226cf239c194959290083fc622fe33da"><td class="memTemplParams" colspan="2">template&lt;typename Functor , typename... Args&gt; </td></tr>
<tr class="memitem:a226cf239c194959290083fc622fe33da"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classntp_1_1work_1_1details_1_1WorkManager.html#a226cf239c194959290083fc622fe33da">Submit</a> (Functor &amp;&amp;functor, Args &amp;&amp;... args)</td></tr>
<tr class="memdesc:a226cf239c194959290083fc622fe33da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Submits a callback into threadpool.  <a href="classntp_1_1work_1_1details_1_1WorkManager.html#a226cf239c194959290083fc622fe33da">More...</a><br /></td></tr>
<tr class="separator:a226cf239c194959290083fc622fe33da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96a99d384f216df8793b1d17cb6d9069"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classntp_1_1work_1_1details_1_1WorkManager.html#a96a99d384f216df8793b1d17cb6d9069">WaitAll</a> (const <a class="el" href="basic__callback_8hpp.html#a52d3f68ac97176db5960bbcd126cfb9e">ntp::details::test_cancel_t</a> &amp;test_cancel) noexcept</td></tr>
<tr class="memdesc:a96a99d384f216df8793b1d17cb6d9069"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for all callbacks to complete.  <a href="classntp_1_1work_1_1details_1_1WorkManager.html#a96a99d384f216df8793b1d17cb6d9069">More...</a><br /></td></tr>
<tr class="separator:a96a99d384f216df8793b1d17cb6d9069"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a588d5f63cfefac8d5d1bb3b7b3fc182c"><td class="memItemLeft" align="right" valign="top"><a id="a588d5f63cfefac8d5d1bb3b7b3fc182c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classntp_1_1work_1_1details_1_1WorkManager.html#a588d5f63cfefac8d5d1bb3b7b3fc182c">CancelAll</a> () noexcept</td></tr>
<tr class="memdesc:a588d5f63cfefac8d5d1bb3b7b3fc182c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel all pending callbacks. <br /></td></tr>
<tr class="separator:a588d5f63cfefac8d5d1bb3b7b3fc182c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classntp_1_1details_1_1BasicManager"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classntp_1_1details_1_1BasicManager')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classntp_1_1details_1_1BasicManager.html">ntp::details::BasicManager</a></td></tr>
<tr class="memitem:a4b258e1048a420512d88a23c5b01cc66 inherit pub_methods_classntp_1_1details_1_1BasicManager"><td class="memItemLeft" align="right" valign="top"><a id="a4b258e1048a420512d88a23c5b01cc66"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classntp_1_1details_1_1BasicManager.html#a4b258e1048a420512d88a23c5b01cc66">BasicManager</a> (PTP_CALLBACK_ENVIRON environment) noexcept</td></tr>
<tr class="memdesc:a4b258e1048a420512d88a23c5b01cc66 inherit pub_methods_classntp_1_1details_1_1BasicManager"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor, that saves an environment associated with a threadpool. <br /></td></tr>
<tr class="separator:a4b258e1048a420512d88a23c5b01cc66 inherit pub_methods_classntp_1_1details_1_1BasicManager"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classntp_1_1details_1_1BasicManager"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classntp_1_1details_1_1BasicManager')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classntp_1_1details_1_1BasicManager.html">ntp::details::BasicManager</a></td></tr>
<tr class="memitem:aba4ebf646951ba34b8341f3aa869c770 inherit pro_methods_classntp_1_1details_1_1BasicManager"><td class="memItemLeft" align="right" valign="top">PTP_CALLBACK_ENVIRON&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classntp_1_1details_1_1BasicManager.html#aba4ebf646951ba34b8341f3aa869c770">Environment</a> () const noexcept</td></tr>
<tr class="memdesc:aba4ebf646951ba34b8341f3aa869c770 inherit pro_methods_classntp_1_1details_1_1BasicManager"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an environment associated with owning threadpool.  <a href="classntp_1_1details_1_1BasicManager.html#aba4ebf646951ba34b8341f3aa869c770">More...</a><br /></td></tr>
<tr class="separator:aba4ebf646951ba34b8341f3aa869c770 inherit pro_methods_classntp_1_1details_1_1BasicManager"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classntp_1_1work_1_1details_1_1WorkManager.html" title="WorkManager for work callbacks. Binds callbacks and threadpool implementation.">WorkManager</a> for work callbacks. Binds callbacks and threadpool implementation. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3219349801a1feceb373f4c11bb73180"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3219349801a1feceb373f4c11bb73180">&#9670;&nbsp;</a></span>WorkManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ntp::work::details::WorkManager::WorkManager </td>
          <td>(</td>
          <td class="paramtype">PTP_CALLBACK_ENVIRON&#160;</td>
          <td class="paramname"><em>environment</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor that initializes all necessary objects. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">environment</td><td>Owning threadpool environment </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a226cf239c194959290083fc622fe33da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a226cf239c194959290083fc622fe33da">&#9670;&nbsp;</a></span>Submit()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Functor , typename... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ntp::work::details::WorkManager::Submit </td>
          <td>(</td>
          <td class="paramtype">Functor &amp;&amp;&#160;</td>
          <td class="paramname"><em>functor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Submits a callback into threadpool. </p>
<p>Creates a callback wrapper and pushes it into a queue, then submits PTP_WORK into corresponding threadpool.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Functor</td><td>Type of callable to invoke in threadpool </td></tr>
    <tr><td class="paramname">Args...</td><td>Types of arguments </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">functor</td><td>Callable to invoke </td></tr>
    <tr><td class="paramname">args</td><td>Arguments to pass into callable (they will be copied into wrapper) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a96a99d384f216df8793b1d17cb6d9069"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96a99d384f216df8793b1d17cb6d9069">&#9670;&nbsp;</a></span>WaitAll()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ntp::work::details::WorkManager::WaitAll </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="basic__callback_8hpp.html#a52d3f68ac97176db5960bbcd126cfb9e">ntp::details::test_cancel_t</a> &amp;&#160;</td>
          <td class="paramname"><em>test_cancel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait for all callbacks to complete. </p>
<p>Wait is performed in separate thread if possible with periodical cancellation checks. If waiting in separate thread is not possible, wait is performed in caller thread, cancellation checks are impossible in this case (error message is reported to logger).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">test_cancel</td><td>Reference to cancellation test function</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if all callbacks are completed, false if cancellation occurred while waiting for callbacks </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>ntp/include/pool/<a class="el" href="work_8hpp_source.html">work.hpp</a></li>
<li>ntp/src/pool/work.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>ntp</b></li><li class="navelem"><b>work</b></li><li class="navelem"><b>details</b></li><li class="navelem"><a class="el" href="classntp_1_1work_1_1details_1_1WorkManager.html">WorkManager</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
